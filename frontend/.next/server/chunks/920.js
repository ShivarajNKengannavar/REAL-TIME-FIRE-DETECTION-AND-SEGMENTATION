exports.id=920,exports.ids=[920],exports.modules={8920:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var o=r(997),n=r(6689),l=r(5194),i=r.n(l);r(9637);var s=r(2210),c=e([s]);s=(c.then?(await c)():c)[0];let __WEBPACK_DEFAULT_EXPORT__=({incidents:e})=>{let t=(0,n.useRef)(null),r=(0,n.useRef)(null),[a,l]=(0,n.useState)(null),[c,u]=(0,n.useState)(""),[d,p]=(0,n.useState)(null),[m,h]=(0,n.useState)("prompt");(0,n.useEffect)(()=>{if(!r.current){r.current=i().map(t.current).setView([12.9716,77.5946],13),i().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors"}).addTo(r.current);let e={OpenStreetMap:i().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),"Light Mode":i().tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"),"Dark Mode":i().tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png")};i().control.layers(e).addTo(r.current)}if(r.current){r.current.eachLayer(e=>{(e instanceof i().Marker||e instanceof i().LayerGroup)&&r.current.removeLayer(e)});let t=e.filter(e=>"number"==typeof e.lat&&"number"==typeof e.lon&&!isNaN(e.lat)&&!isNaN(e.lon));if(t.forEach(e=>{let t=e.risk_level>.7?"red":e.risk_level>.3?"orange":"green",a=i().divIcon({className:"custom-div-icon",html:`<div style="background-color: ${t}; width: 10px; height: 10px; border-radius: 50%; border: 2px solid white;"></div>`,iconSize:[10,10],iconAnchor:[5,5]});i().marker([e.lat,e.lon],{icon:a}).bindPopup(`
            <b>${e.location_name}</b><br>
            Risk Level: ${(100*e.risk_level).toFixed(1)}%<br>
            Time: ${e.timestamp}<br>
            Zone: ${e.zone_type}
          `).addTo(r.current)}),t.length>0){let e=t.map(e=>[e.lat,e.lon,e.risk_level]);i().heatLayer(e,{radius:25,blur:15,maxZoom:10,max:1,gradient:{.4:"blue",.6:"yellow",.8:"orange",1:"red"}}).addTo(r.current)}navigator.geolocation&&"live"===m&&navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:a}=e.coords;l([t,a]),r.current.setView([t,a],13),i().marker([t,a]).addTo(r.current)},()=>{alert("Could not get your location")})}},[e,m]);let handleLocationSearch=async()=>{if(!c.trim())return;let e=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${c}`),t=await e.json();if(t&&t[0]){let{lat:e,lon:a}=t[0];l([parseFloat(e),parseFloat(a)]),r.current.setView([e,a],13),d&&r.current.removeLayer(d);let o=i().marker([e,a]).addTo(r.current);p(o)}else alert("Location not found")};return(0,o.jsxs)(s.Box,{h:"100%",w:"100%",children:["prompt"===m&&(0,o.jsxs)(s.Box,{mb:4,children:[o.jsx(s.Button,{onClick:()=>h("live"),colorScheme:"green",mr:4,children:"Use My Current Location"}),o.jsx(s.Button,{onClick:()=>h("manual"),colorScheme:"blue",children:"Enter Location Manually"})]}),"manual"===m&&(0,o.jsxs)(o.Fragment,{children:[o.jsx(s.Input,{value:c,onChange:e=>u(e.target.value),placeholder:"Enter a location",size:"lg",mb:4}),o.jsx(s.Button,{onClick:handleLocationSearch,colorScheme:"blue",mb:4,children:"Search Location"})]}),o.jsx(s.Box,{ref:t,h:"500px",w:"100%"})]})};a()}catch(e){a(e)}})},9637:()=>{}};